<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Proforma Invoice - {{ form.proforma_no }}</title>
    <style>
      @page {
        margin: 20px;
      }
      .w-100 {
        width: 100%;
      }
      body {
        font-family: Arial, sans-serif;
        font-size: 12px;
        color: #222;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        /* padding: 24px; */
        background: #fff;
      }
      .invoice-container {
        border: 1px solid #222;
      }
      .header {
        display: flex;
        align-items: flex-start;
        border-bottom: 2px solid #222;
        padding: 10px;
        /* padding-bottom: 8px; */
      }
      .logo {
        width: 120px;
        margin-right: 24px;
      }
      .company-details {
        flex: 1;
      }
      .company-title {
        font-size: 22px;
        font-weight: bold;
        letter-spacing: 1px;
      }
      .company-contact {
        font-size: 12px;
        margin-top: 4px;
      }
      .company-ids {
        font-size: 12px;
        margin-top: 4px;
      }
      .proforma-title {
        text-align: center;
        font-size: 18px;
        font-weight: bold;
        margin: 18px 0 8px 0;
        letter-spacing: 1px;
        background: #eaeaea;
        padding: 8px;
      }
      .info-table {
        width: 100%;
        border: 1px solid #222;
      }
      .info-table td {
        font-size: 12px;
        /* padding: 2px 6px; */
        vertical-align: top;
      }
      .border-bottom {
        border-bottom: 1px solid #222 !important;
      }
      .section-title {
        font-weight: bold;
        font-size: 13px;
        margin-bottom: 2px;
      }
      .address-block {
        font-size: 12px;
        margin-bottom: 2px;
      }
      .bold {
        font-weight: bold;
      }
      .items-table {
        width: 100%;
        table-layout: fixed;
        border-collapse: collapse;
        padding: 0px;
        border: 1px solid #222;
      }
      .items-table th,
      .items-table td {
        border: 1px solid #222;
        font-size: 12px;
      }
      .items-table th {
        font-weight: bold;
      }
      .text-center {
        text-align: center;
      }
      .text-right {
        text-align: right;
      }
      .totals-table {
        width: 100%;
        border-collapse: collapse;
      }
      .totals-table td {
        font-size: 12px;
        /* padding: 4px 8px; */
      }
      .totals-table .label {
        text-align: right;
        font-weight: bold;
      }
      .totals-table .amount {
        text-align: right;
      }
      .totals-table .grand {
        font-size: 14px;
        font-weight: bold;
        border-top: 2px solid #222;
      }
      .remarks,
      .bank-details,
      .terms {
        font-size: 12px;
      }
      .bank-details {
        border: 1px solid #222;
        padding: 8px;
      }
      .terms {
        margin-top: 10px;
        font-size: 11px;
      }
      .footer-note {
        margin-top: 16px;
        font-size: 11px;
        color: #444;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="invoice-container">
        <!-- Header -->
        <div class="header">
          {% if form.company_logo %}
          <div style="border-right: 1px solid #222; margin-right: 10px">
            <img
              src="{{ form.company_logo }}"
              alt="logo"
              style="max-height: 90px; max-width: 150px"
            />
          </div>
          {% endif %}
          <div class="company-details">
            <div class="company-title">
              {{ form.company_name or 'RISHABHDEV GLASS PVT. LTD.' }}
            </div>
            <div class="company-contact">
              {{ form.company_address }}<br />
              Mobile - {{ form.company_mobile }} .Email: {{ form.company_email
              }}
            </div>
            <div class="company-ids">
              GST NO. : {{ form.company_gst }} &nbsp;&nbsp;&nbsp; PAN NO. : {{
              form.company_pan or '' }}
            </div>
          </div>
        </div>

        <!-- Title -->
        <div class="proforma-title">PROFORMA INVOICE</div>

        <!-- Info Table -->
        <table class="info-table">
          <tr>
            <td
              style="
                width: 60%;
                vertical-align: top;
                border-right: 1px solid #222;
              "
            >
              <div class="section-title">BILL TO :</div>
              <div
                class="address-block"
                style="padding-bottom: 30px; border-bottom: 1px solid #222"
              >
                <span class="bold">{{ form.bill_to.name }}</span><br />
                {{ form.bill_to.address }}<br />
                {% if form.bill_to.phone %} Ph. No.: {{ form.bill_to.phone }} {%
                endif %} {% if form.bill_to.mobile %} Mobile No.: {{
                form.bill_to.mobile }}<br />{% endif %} {% if form.bill_to.gst
                %}GST NO. : {{ form.bill_to.gst }}<br />{% endif %}
              </div>
              <div class="section-title" style="margin-top: 10px">
                SHIP TO :
              </div>
              <div class="address-block">
                <span class="bold">{{ form.ship_to.name }}</span><br />
                {{ form.ship_to.address }}<br />
                {% if form.ship_to.mobile %}Mobile No: {{ form.ship_to.mobile
                }}<br />{% endif %}
              </div>
            </td>
            <td style="width: 40%; vertical-align: top">
              <table class="w-100">
                <tr>
                  <td colspan="2" class="border-bottom">
                    <span class="bold">PROFORMA NO.:</span> {{ form.proforma_no
                    }}
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="border-bottom">
                    <span class="bold">PI Date:</span> {{ form.pi_date }}
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="border-bottom">
                    <span class="bold">Destination:</span> {{ form.destination
                    }}
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="border-bottom">
                    <span class="bold">Delivery Date:</span> {{
                    form.delivery_date }}
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="border-bottom">
                    <span class="bold">Payment Term:</span> {{
                    form.payment_terms }}
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="border-bottom">
                    <span class="bold">Made by:</span> {{ form.sales_person }}
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="border-bottom">
                    <span class="bold">Transport:</span> {{ form.transport }}
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="border-bottom">
                    <span class="bold">Unloading:</span> {{ form.unloading }}
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>

        <!-- Items Table -->
        <table class="items-table">
          <thead>
            <tr>
              <th class="text-center" style="width: 32px" rowspan="2">SR</th>
              <th class="text-center" style="width: 90px" rowspan="2">
                CUST. ORD
              </th>
              <th class="text-center" style="width: 80px" rowspan="2">ITEM</th>
              <th class="text-center" style="width: 60px" rowspan="2">
                WT(KG)
              </th>
              <th class="text-center" colspan="2">ACTUAL SIZE</th>
              {% if form.has_inch_unit %}
              <th class="text-center" colspan="2">CHARGEABLE SIZE (INCH)</th>
              {% endif %}
              <th class="text-center" style="width: 48px" rowspan="2">QTY</th>
              <th class="text-center" style="width: 70px" rowspan="2">SQ.FT</th>
              <th class="text-center" style="width: 70px" rowspan="2">
                RATE ({{ form['proforma_items'][0].rate_type if
                form['proforma_items']|length > 0 else '' }})
              </th>
              <th class="text-center" style="width: 80px" rowspan="2">
                AMOUNT
              </th>
            </tr>
            <tr>
              <th class="text-center">
                WIDTH<br />({{ form['proforma_items'][0].unit if
                form['proforma_items']|length > 0 else '' }})
              </th>
              <th class="text-center">
                HEIGHT<br />({{ form['proforma_items'][0].unit if
                form['proforma_items']|length > 0 else '' }})
              </th>
              {% if form.has_inch_unit %}
              <th class="text-center">WIDTH</th>
              <th class="text-center">HEIGHT</th>
              {% endif %}
            </tr>
          </thead>
          <tbody>
            {% for item in form.proforma_items %} {% set group_label =
            (item.thickness ~ ' ' ~ item.name)|trim %}
            <tr>
              <td class="text-center">{{ loop.index }}</td>
              <td class="text-center">{{ item.customer_order_no }}</td>
              <td class="text-center">{{ group_label }}</td>
              <td class="text-center">{{ item.weight }}</td>
              <td class="text-center">
                {{ item.width }} {{ item.size_width_fraction or '' }}
              </td>
              <td class="text-center">
                {{ item.height }} {{ item.size_height_fraction or '' }}
              </td>
              {% if form.has_inch_unit %}
              <td class="text-center">{{ item.chargeable_width }}</td>
              <td class="text-center">{{ item.chargeable_height }}</td>
              {% endif %}
              <td class="text-center">{{ item.qty }}</td>
              <td class="text-center">{{ item.total_sqft }}</td>
              <td class="text-center">{{ item.rate }}</td>
              <td class="text-center">{{ '%.2f'|format(item.amount) }}</td>
            </tr>
            {% endfor %}
            <tr>
              <td colspan="4" class="text-right bold">Total weight in KG :</td>
              <td class="text-center bold">{{ form.total_weight }}</td>
              <td colspan="3" class="text-right bold">Total:</td>
              <td class="text-center bold">{{ form.total_qty }}</td>
              <td class="text-center bold">{{ form.total_sqft }}</td>
              <td></td>
              <td class="text-center bold">
                {{ '%.2f'|format(form.basic_total) }}
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Remarks and Totals -->
        <table style="width: 100%; margin-top: 18px">
          <tbody>
            <tr>
              <td style="width: 55%; vertical-align: top">
                <div class="remarks">
                  <div class="bold">Remarks :</div>
                  <div>{{ form.remarks or '' }}</div>
                  {% if form.has_advanced_payment and
                  form.advanced_payment_notes %}
                  <div style="margin-top: 8px">
                    <div class="bold">Advanced Payment Notes :</div>
                    <div>{{ form.advanced_payment_notes }}</div>
                  </div>
                  {% endif %}
                </div>
              </td>
              <td style="width: 45%; vertical-align: top">
                <table class="totals-table">
                  <tbody>
                    <tr>
                      <td class="label">Basic Total</td>
                      <td class="amount">
                        {{ '%.2f'|format(form.basic_total) }}
                      </td>
                    </tr>
                    {% if form.additional_costs and form.additional_costs|length
                    > 0 %} {% for cost in form.additional_costs %}
                    <tr>
                      <td class="label">{{ cost.name }}</td>
                      <td class="amount">{{ cost.amount }}</td>
                    </tr>
                    {% endfor %} {% endif %}
                    <tr>
                      <td class="label">Total</td>
                      <td class="amount">
                        {{ form.total_cost_with_additional_cost }}
                      </td>
                    </tr>
                    {% if form.is_gst %}
                    <tr>
                      <td class="label">CGST 9.00 %</td>
                      <td class="amount">{{ form.cgst }}</td>
                    </tr>
                    <tr>
                      <td class="label">SGST 9.00 %</td>
                      <td class="amount">{{ form.sgst }}</td>
                    </tr>
                    <tr class="grand">
                      <td class="label">Total : Add GST 18%</td>
                      <td class="amount">{{ form.total_gst }}</td>
                    </tr>
                    {% endif %}
                    <tr class="grand">
                      <td class="label">Grand Total</td>
                      <td class="amount">{{ form.grand_total }}</td>
                    </tr>
                    {% if form.has_advanced_payment %}
                    <tr>
                      <td class="label">Advanced Payment</td>
                      <td class="amount">
                        -{{ '%.2f'|format(form.advanced_payment_amount) }}
                      </td>
                    </tr>
                    <tr class="grand">
                      <td class="label">Balance Amount</td>
                      <td class="amount">{{ form.balance_amount }}</td>
                    </tr>
                    {% endif %}
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Bank Details -->
      <div class="bank-details">
        <b>Bank Details :</b> A/c Name : {{ form.bank_name or 'Rishabhdev Glass
        Pvt. Ltd.' }} , Bank Name: {{ form.bank or 'HDFC Bank' }}, Branch: {{
        form.branch or 'MIDC Dombivli East' }}<br />
        A/c No:{{ form.account_no or '59209821584571' }}, IFSC Code : {{
        form.ifsc or 'HDFC0003783' }}
      </div>

      <!-- Terms & Conditions -->
      <div class="terms">
        <span class="bold" style="text-decoration: underline"
          >Terms & Conditions</span
        ><br />
        {% for term in form.terms %} {{ loop.index }}) {{ term }}<br />
        {% endfor %}
      </div>

      <div class="footer-note">
        If material is ready and you did not pickup material within 7 days then
        we will generate invoice against that material and we will not be
        responsible for any breakage
      </div>
    </div>
  </body>
</html>
